{"ast":null,"code":"const {\n  deleteSubscription,\n  getAllSubscriptions,\n  updateSubscriptionById,\n  addSubscription\n} = require(\"../DALs/Subscriptions_DAL\"); //Delete member's subscriptions by member's id:\n\n\nconst deleteSubscriptionById = async id => {\n  const sub = await getSubscriptionsByMemberId(id);\n\n  if (sub !== undefined) {\n    await deleteSubscription(sub._id);\n  }\n}; //Checking if a member has subscription:\n\n\nconst checkIfHasSubscription = async id => {\n  let boolean = false; //dont has subscription\n\n  const subscriptions = await getAllSubscriptions(); //all subscriptions from DB\n\n  for (let sub of subscriptions) {\n    if (sub.memberId === id) {\n      //checking if member with memberId has subscriptions\n      boolean = true;\n    }\n  }\n\n  return boolean;\n}; //Finding subscriptions by member id:\n\n\nconst getSubscriptionsByMemberId = async id => {\n  const subs = await getAllSubscriptions();\n  const subscription = subs.find(sub => sub.memberId === id);\n  return subscription;\n}; //Adding a movie to the subscription's movie array in the DB:\n\n\nconst addMovieToSubscriptions = async (memberId, newMovie) => {\n  const subBool = await checkIfHasSubscription(memberId);\n\n  if (subBool) {\n    const sub = await getSubscriptionsByMemberId(memberId);\n    let array = [...sub.movies, newMovie];\n    const newObj = { ...sub,\n      movies: array\n    };\n    await updateSubscriptionById(newObj, memberId);\n  } else {\n    const newSub = {\n      memberId: memberId,\n      movies: [newMovie]\n    };\n    await addSubscription(newSub);\n  }\n};\n\nexport { deleteSubscriptionById, checkIfHasSubscription, getSubscriptionsByMemberId, addMovieToSubscriptions };","map":{"version":3,"sources":["/Users/Sveta/Documents/Full_stack/Final Project/React_Client/src/Utils/Subscriptions_Utils.js"],"names":["deleteSubscription","getAllSubscriptions","updateSubscriptionById","addSubscription","require","deleteSubscriptionById","id","sub","getSubscriptionsByMemberId","undefined","_id","checkIfHasSubscription","boolean","subscriptions","memberId","subs","subscription","find","addMovieToSubscriptions","newMovie","subBool","array","movies","newObj","newSub"],"mappings":"AAAA,MAAM;AAAGA,EAAAA,kBAAH;AAAuBC,EAAAA,mBAAvB;AAA4CC,EAAAA,sBAA5C;AAAoEC,EAAAA;AAApE,IAAwFC,OAAO,CAAC,2BAAD,CAArG,C,CAEA;;;AACA,MAAMC,sBAAsB,GAAG,MAAMC,EAAN,IAC/B;AACI,QAAMC,GAAG,GAAG,MAAMC,0BAA0B,CAACF,EAAD,CAA5C;;AACA,MAAIC,GAAG,KAAIE,SAAX,EACA;AACI,UAAMT,kBAAkB,CAACO,GAAG,CAACG,GAAL,CAAxB;AACH;AACJ,CAPD,C,CASA;;;AACA,MAAMC,sBAAsB,GAAG,MAAML,EAAN,IAC/B;AACI,MAAIM,OAAO,GAAG,KAAd,CADJ,CACwB;;AACpB,QAAMC,aAAa,GAAG,MAAMZ,mBAAmB,EAA/C,CAFJ,CAEqD;;AACjD,OAAI,IAAIM,GAAR,IAAeM,aAAf,EAA6B;AACzB,QAAGN,GAAG,CAACO,QAAJ,KAAeR,EAAlB,EAAqB;AAAC;AAClBM,MAAAA,OAAO,GAAG,IAAV;AACH;AACJ;;AACD,SAAOA,OAAP;AACH,CAVD,C,CAWA;;;AACA,MAAMJ,0BAA0B,GAAG,MAAMF,EAAN,IACnC;AACI,QAAMS,IAAI,GAAG,MAAMd,mBAAmB,EAAtC;AACA,QAAMe,YAAY,GAAGD,IAAI,CAACE,IAAL,CAAWV,GAAD,IAAOA,GAAG,CAACO,QAAJ,KAAeR,EAAhC,CAArB;AACA,SAAOU,YAAP;AACH,CALD,C,CAOA;;;AACA,MAAME,uBAAuB,GAAG,OAAOJ,QAAP,EAAiBK,QAAjB,KAA8B;AAC1D,QAAMC,OAAO,GAAG,MAAMT,sBAAsB,CAACG,QAAD,CAA5C;;AACA,MAAIM,OAAJ,EAAa;AACT,UAAMb,GAAG,GAAG,MAAMC,0BAA0B,CAACM,QAAD,CAA5C;AACA,QAAIO,KAAK,GAAG,CAAC,GAAGd,GAAG,CAACe,MAAR,EAAgBH,QAAhB,CAAZ;AACA,UAAMI,MAAM,GAAG,EAAE,GAAGhB,GAAL;AAAUe,MAAAA,MAAM,EAAED;AAAlB,KAAf;AACA,UAAMnB,sBAAsB,CAACqB,MAAD,EAAST,QAAT,CAA5B;AACH,GALD,MAKO;AACH,UAAMU,MAAM,GAAG;AACXV,MAAAA,QAAQ,EAAEA,QADC;AAEXQ,MAAAA,MAAM,EAAE,CAACH,QAAD;AAFG,KAAf;AAIA,UAAMhB,eAAe,CAACqB,MAAD,CAArB;AACH;AACJ,CAdD;;AAgBA,SAAQnB,sBAAR,EAA+BM,sBAA/B,EAAsDH,0BAAtD,EAAiFU,uBAAjF","sourcesContent":["const {  deleteSubscription, getAllSubscriptions, updateSubscriptionById, addSubscription } = require(\"../DALs/Subscriptions_DAL\")\n\n//Delete member's subscriptions by member's id:\nconst deleteSubscriptionById = async(id) =>\n{\n    const sub = await getSubscriptionsByMemberId(id)\n    if (sub !==undefined)\n    {\n        await deleteSubscription(sub._id)\n    }\n}\n\n//Checking if a member has subscription:\nconst checkIfHasSubscription = async(id) =>\n{\n    let boolean = false //dont has subscription\n    const subscriptions = await getAllSubscriptions()//all subscriptions from DB\n    for(let sub of subscriptions){\n        if(sub.memberId===id){//checking if member with memberId has subscriptions\n            boolean = true\n        }\n    }\n    return boolean\n}\n//Finding subscriptions by member id:\nconst getSubscriptionsByMemberId = async(id)=>\n{\n    const subs = await getAllSubscriptions()\n    const subscription = subs.find((sub)=>sub.memberId===id)\n    return subscription\n}\n\n//Adding a movie to the subscription's movie array in the DB:\nconst addMovieToSubscriptions = async (memberId, newMovie) => {\n    const subBool = await checkIfHasSubscription(memberId)\n    if (subBool) {\n        const sub = await getSubscriptionsByMemberId(memberId)\n        let array = [...sub.movies, newMovie]\n        const newObj = { ...sub, movies: array }\n        await updateSubscriptionById(newObj, memberId)\n    } else {\n        const newSub = {\n            memberId: memberId,\n            movies: [newMovie]\n        }\n        await addSubscription(newSub)\n    }\n}\n\nexport {deleteSubscriptionById,checkIfHasSubscription,getSubscriptionsByMemberId,addMovieToSubscriptions}"]},"metadata":{},"sourceType":"module"}