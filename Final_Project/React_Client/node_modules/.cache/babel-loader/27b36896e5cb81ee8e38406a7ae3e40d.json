{"ast":null,"code":"import { getMemberByID } from \"../DALs/Members_DAL\";\nimport { deleteMovie, getAllMovies, getMovieByID } from \"../DALs/MoviesDAL\";\nimport { getAllSubscriptions, updateSubscriptionById } from \"../DALs/Subscriptions_DAL\"; //Search movies that includes an input word:\n\nconst searchMovies = (allMovies, searchInput) => {\n  const arrMovies = []; //array of movies after Search\n\n  for (let movie of allMovies) {\n    if (movie.name.toUpperCase().includes(searchInput.toUpperCase())) {\n      arrMovies.push(movie);\n    }\n  }\n\n  return arrMovies;\n}; //Checking if someone has watched a movie:\n\n\nconst checkIfMovieWatched = async id => {\n  let boolean = false; // movie dont watched\n\n  const Movie = await getMovieByID(id); //specific movie by id\n\n  console.log(M);\n  const subscriptions = await getAllSubscriptions(); //subscriptions of this movie\n\n  for (let subscription of subscriptions) {\n    for (let movie of subscription.movies) {\n      if (movie.id === Movie._id) {\n        boolean = true;\n      }\n    }\n  }\n\n  console.log(boolean);\n  return boolean;\n}; //Delete one movie from Subscriptions what watched this movie:\n\n\nconst deleteMovieFromSub = async id => {\n  const subscriptions = await getAllSubscriptions();\n\n  for (let subscription of subscriptions) {\n    for (let movie of subscription.movies) {\n      if (movie.movieId === id) {\n        let newMovies = subscription.movies;\n        let index = newMovies.findIndex(movie => movie.movieId === id);\n        newMovies.splice(index, 1);\n        let obj = { ...subscription,\n          movies: newMovies\n        };\n        await updateSubscriptionById(obj, subscription.memberId);\n      }\n    }\n  }\n}; //Delete one movie from Db and from Subscriptions what whatched this movie:\n\n\nconst deleteMovieFromAll = async id => {\n  await deleteMovieFromSub(id);\n  await deleteMovie(id);\n}; //Checking who of the members has watched a movie:\n\n\nconst whoWatched = async movieId => {\n  const arr = []; //members who has watched\n\n  const subscriptions = await getAllSubscriptions(); //all subscriptions\n\n  for (let subscription of subscriptions) {\n    for (let movie of subscription.movies) {\n      if (movie.movieId === movieId) //for movie with specific id:\n        {\n          let member = await getMemberByID(subscription.memberId);\n          let obj = {\n            name: member.name,\n            date: movie.date\n          };\n          arr.push(obj);\n        }\n    }\n  }\n\n  return arr;\n}; //Finding all the not whatched movies to the member:\n\n\nconst findDontWatchedMovies = async watchedMovies => {\n  const movies = await getAllMovies(); //all movies\n\n  const newArr = [];\n\n  for (let movie of movies) {\n    //for each movie checking if its whatched by member\n    let bool = false;\n\n    for (let watchedMovie of watchedMovies) {\n      if (movie._id === watchedMovie.movieId) bool = true;\n    }\n\n    if (!bool) newArr.push(movie);\n  }\n\n  return newArr;\n}; // a function that finds a movie by it's name\n\n\nconst findMovieByName = async name => {\n  const movies = await getAllMovies();\n  const movie = movies.find(movie => movie.name === name);\n  return movie;\n}; //Checking someone has watched the movie\n\n\nconst checkIfSomeoneWatched = async movieId => {\n  let bool = false;\n  const Movie = await getMovieByID(movieId);\n  const subs = await getAllSubscriptions();\n\n  for (let sub of subs) {\n    for (let movie of sub.movies) {\n      if (movie.movieId === Movie._id) {\n        bool = true; //if someone has watched\n      }\n    }\n  }\n\n  return bool;\n};\n\nexport { searchMovies, checkIfMovieWatched, deleteMovieFromSub, deleteMovieFromAll, whoWatched, findDontWatchedMovies, findMovieByName, checkIfSomeoneWatched };","map":{"version":3,"sources":["/Users/Sveta/Documents/Full_stack/Final Project/React_Client/src/Utils/Movies_Utils.js"],"names":["getMemberByID","deleteMovie","getAllMovies","getMovieByID","getAllSubscriptions","updateSubscriptionById","searchMovies","allMovies","searchInput","arrMovies","movie","name","toUpperCase","includes","push","checkIfMovieWatched","id","boolean","Movie","console","log","M","subscriptions","subscription","movies","_id","deleteMovieFromSub","movieId","newMovies","index","findIndex","splice","obj","memberId","deleteMovieFromAll","whoWatched","arr","member","date","findDontWatchedMovies","watchedMovies","newArr","bool","watchedMovie","findMovieByName","find","checkIfSomeoneWatched","subs","sub"],"mappings":"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","sourcesContent":["import { getMemberByID } from \"../DALs/Members_DAL\"\nimport { deleteMovie, getAllMovies, getMovieByID } from \"../DALs/MoviesDAL\"\nimport {  getAllSubscriptions, updateSubscriptionById } from \"../DALs/Subscriptions_DAL\"\n\n//Search movies that includes an input word:\nconst searchMovies = (allMovies, searchInput) => {\n    const arrMovies = []//array of movies after Search\n    for (let movie of allMovies) {\n        if (movie.name.toUpperCase().includes(searchInput.toUpperCase()))\n        {\n            arrMovies.push(movie)\n        }\n    }\n    return arrMovies\n}\n\n\n//Checking if someone has watched a movie:\nconst checkIfMovieWatched = async (id)=>\n{\n    let boolean = false // movie dont watched\n    const Movie = await getMovieByID(id)//specific movie by id\n    console.log(M)\n    const subscriptions = await getAllSubscriptions()//subscriptions of this movie\n    for (let subscription of subscriptions){\n        for (let movie of subscription.movies ){\n            if(movie.id===Movie._id){\n                boolean = true\n            }\n        }\n    }\n    console.log(boolean)\n    return boolean\n}\n\n//Delete one movie from Subscriptions what watched this movie:\nconst deleteMovieFromSub = async (id)=>\n{\n    const subscriptions = await getAllSubscriptions()\n    for (let subscription of subscriptions){\n        for(let movie of subscription.movies){\n            if(movie.movieId === id){\n                let newMovies = subscription.movies\n                let index = newMovies.findIndex((movie)=> movie.movieId ===id)\n                newMovies.splice(index,1)\n                let obj = {...subscription, movies: newMovies}\n                await updateSubscriptionById(obj,subscription.memberId)\n            }\n        }\n    }\n}\n\n//Delete one movie from Db and from Subscriptions what whatched this movie:\nconst deleteMovieFromAll = async (id)=>\n{\n    await deleteMovieFromSub(id)\n    await deleteMovie(id)\n}\n\n//Checking who of the members has watched a movie:\nconst whoWatched = async(movieId) =>\n{\n    const arr=[]//members who has watched\n    const subscriptions = await getAllSubscriptions()//all subscriptions\n    for (let subscription of subscriptions){\n        for(let movie of subscription.movies){\n            if(movie.movieId === movieId)//for movie with specific id:\n            {\n                let member = await getMemberByID(subscription.memberId)\n                let obj = {\n                    name: member.name,\n                    date: movie.date\n                }\n                arr.push(obj)\n            }\n        }\n    }\n    return arr\n}\n\n//Finding all the not whatched movies to the member:\nconst findDontWatchedMovies = async (watchedMovies) => {\n    const movies = await getAllMovies()//all movies\n    const newArr = []\n    for (let movie of movies) {//for each movie checking if its whatched by member\n        let bool = false\n        for (let watchedMovie of watchedMovies) {\n            if (movie._id === watchedMovie.movieId)\n                bool = true\n        }\n        if (!bool)\n            newArr.push(movie)\n    }\n    return newArr\n}\n\n\n// a function that finds a movie by it's name\nconst findMovieByName = async (name) => \n{\n    const movies = await getAllMovies()\n    const movie = movies.find((movie) => movie.name === name)\n    return movie;\n}\n\n//Checking someone has watched the movie\nconst checkIfSomeoneWatched = async (movieId) => {\n    let bool = false\n    const Movie = await getMovieByID(movieId)\n    const subs = await getAllSubscriptions()\n    for (let sub of subs) \n    {\n        for (let movie of sub.movies) \n        {\n            if (movie.movieId === Movie._id) \n            {\n                bool = true//if someone has watched\n            }\n        }\n    }\n    return bool\n}\nexport  {searchMovies,checkIfMovieWatched,deleteMovieFromSub,deleteMovieFromAll,whoWatched,findDontWatchedMovies,findMovieByName,checkIfSomeoneWatched}"]},"metadata":{},"sourceType":"module"}