{"ast":null,"code":"var _jsxFileName = \"/Users/Sveta/Documents/Full_stack/Final Project/React_Client/src/Components/CreateAccountComponent.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router';\nimport { updateUserById } from '../DALs/Users_DAL';\nimport { checkIfUserExist, findUserByUserName, checkIfUsernameExist, findUserID, checkIfPasswordExist } from '../Utils/Users_Utils';\nimport '../Style/style.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CreateAccountComp() {\n  _s();\n\n  const [username, setUserName] = useState();\n  const [password, setPassword] = useState();\n  const navigate = useNavigate(); // for transiton to another page\n  //Checking all the inputs from the client and if it valid it saves the new password in the database:\n\n  const checkAndSend = async () => {\n    const existUser = await findUserByUserName(username); //findUserByUserName() from Utils.\n\n    const newUserObj = {\n      //Create new obj user(user,userJson,permissions from server)\n      user: {\n        username: username,\n        password: password\n      },\n      userJson: { ...existUser.userJson\n      },\n      permissions: { ...existUser.permissions\n      }\n    };\n\n    if (await checkIfUsernameExist(username)) {\n      //validating the username\n      const id = await findUserID(username); //finding id of user\n\n      if (await checkIfPasswordExist(id)) //validating the password\n        alert('This User Already Exists');else {\n        await updateUserById(newUserObj, id);\n        navigate('/'); //navigating back to login\n      }\n    } else alert('The Username Is Incorrect');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"createAccountPage\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Movies -Subscriptions Web Site\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loginDiv\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Create an Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 13\n      }, this), \"User Name: \", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"username\",\n        onChange: e => setUserName({ ...username,\n          username: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 24\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 125\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 130\n      }, this), \"Password: \", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"password\",\n        onChange: e => setPassword({ ...password,\n          password: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 124\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: checkAndSend,\n        children: \"Create\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/'),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 66\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CreateAccountComp, \"AgasCb3QpmmxBSErdNWwQdOM8XM=\", false, function () {\n  return [useNavigate];\n});\n\n_c = CreateAccountComp;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateAccountComp\");","map":{"version":3,"sources":["/Users/Sveta/Documents/Full_stack/Final Project/React_Client/src/Components/CreateAccountComponent.js"],"names":["React","useState","useNavigate","updateUserById","checkIfUserExist","findUserByUserName","checkIfUsernameExist","findUserID","checkIfPasswordExist","CreateAccountComp","username","setUserName","password","setPassword","navigate","checkAndSend","existUser","newUserObj","user","userJson","permissions","id","alert","e","target","value"],"mappings":"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","sourcesContent":["import React from 'react'\nimport  { useState } from 'react'\nimport { useNavigate } from 'react-router';\nimport { updateUserById } from '../DALs/Users_DAL';\nimport { checkIfUserExist,findUserByUserName,checkIfUsernameExist,findUserID, checkIfPasswordExist } from '../Utils/Users_Utils';\nimport '../Style/style.css'\n\nexport default function CreateAccountComp() {\n\n    const [username, setUserName] = useState()\n    const [password, setPassword] = useState()\n\n    const navigate = useNavigate(); // for transiton to another page\n\n  //Checking all the inputs from the client and if it valid it saves the new password in the database:\n  const checkAndSend = async () => {\n    const existUser = await findUserByUserName(username)//findUserByUserName() from Utils.\n    \n    const newUserObj = {//Create new obj user(user,userJson,permissions from server)\n        user: { username: username, password: password },\n        userJson: { ...existUser.userJson },\n        permissions: { ...existUser.permissions }\n    }\n    if (await checkIfUsernameExist(username)) {  //validating the username\n        const id = await findUserID(username)//finding id of user\n        if (await checkIfPasswordExist(id))  //validating the password\n            alert('This User Already Exists')\n        else {\n            await updateUserById(newUserObj,id)\n            navigate('/')   //navigating back to login\n        }\n    } else\n        alert('The Username Is Incorrect')\n}\n\n    return (\n        <div className='createAccountPage'>\n            <h1>Movies -Subscriptions Web Site</h1>\n            <div className='loginDiv'>\n            <h2>Create an Account</h2>\n            User Name: <input type=\"text\" name=\"username\" onChange={e=>setUserName({...username,username:e.target.value})}/><br/><br/>\n            Password: <input type=\"text\" name=\"password\" onChange={e=>setPassword({...password,password:e.target.value})}/><br/>\n            <button onClick={checkAndSend}>Create</button>\n            <button onClick={() => navigate('/')}>Cancel</button><br />\n            </div>       \n        </div>)\n}"]},"metadata":{},"sourceType":"module"}